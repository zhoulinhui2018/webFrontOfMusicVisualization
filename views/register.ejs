<!DOCTYPE html>
<html>

<head>
    <title><%= title %></title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/stylesheets/style1.css" type="text/css" media="all">
    <script src="/javascripts/jquery-3.4.1.min.js"></script>
    <script src="/javascripts/config.js"></script>
    <script type="text/javascript">
    function register() {
        var userName = $("#userName").val();
        var password = $("#password").val();
        console.log(userName, password);
        $.ajax({
            url: config.baseUrl + '/user/signup',
            type: "POST",
            headers: { "Content-Type": "application/json;charset=UTF-8" },
            data: JSON.stringify({ "password": password, "userName": userName }),
            xhrFields: { withCredentials: true }, // 携带跨域cookie
            crossDomain: true,
            success: function(result) {
                alert(result)
                if (result == "success")
                    window.location.href = "/login";
            },
            error: function(xhr, errorMessage, e) {
                alert(errorMessage)
            }
        })
    }
    </script>
</head>

<body>
    <div class="banner">
        <div class="agileinfo-dot">
            <div class="w3layoutscontaineragileits">
                <h1>注册</h1>
                <div class="w3layoutscontaineragileits">
                    用户名：<input id="userName" type="text" name="userName" placeholder="请输入姓名"><br>
                    密码：<input id="password" type="password" name="password" placeholder="请输入密码" maxlength="16"><br>
                    <div class="aitssendbuttonw3ls">
                        <input type="button" value="注册" onclick="register()">
                    </div>
                </div>
            </div>
        </div>
</body>

</html>
